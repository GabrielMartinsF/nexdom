import{S as x,J as V,W as l,O as C,L as re,r as m,I as Q,K as g,M as o,N as L,Q as N,X as ie,R as $,c as _e,g as Ee,a as R,w as Z,d as G,q as ee,u as oe,h as te,Y as Se,b as Ve,A as qe,Z as Oe,o as we,P as j,T as Ce,U as xe}from"./index-CEzjuqYt.js";import{_ as ue,u as H,Q as A,a as I,b as de,c as z,v as ke,d as le,e as $e,p as ae,f as Me,g as De,h as Ne,i as Re,j as Qe,k as Le,r as se,s as Ie,l as Fe}from"./_plugin-vue_export-helper-B5rTK6fO.js";import{s as Be}from"./axios-BZTZ8NyB.js";import{Q as F,a as ce,b as k}from"./QForm-DAm6Mzeg.js";import{b as Ue,s as je,d as ze,e as He,f as Ae,c as ne,j as We}from"./QItem-DOM3mAUF.js";const Je={props:{nome:String,valor:Number,tipo:String,quantidade:Number,saida:Number},methods:{precoFormatado(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Number(e))}}},Ke={class:"produto-card"},Xe={class:"header"},Ye={class:"nome"},Ze={class:"info preco-container"},Ge={class:"preco"},eo={class:"info detalhes"},oo={class:"valor"},to={class:"valor"},lo={key:0},ao={class:"valor"};function so(e,t,v,P,p,c){return V(),x("div",Ke,[l("div",Xe,[l("p",Ye,C(v.nome),1)]),l("div",Ze,[l("p",Ge,C(c.precoFormatado(v.valor)),1)]),l("div",eo,[l("div",null,[t[0]||(t[0]=l("p",{class:"label"},"Tipo",-1)),l("p",oo,C(v.tipo),1)]),l("div",null,[t[1]||(t[1]=l("p",{class:"label"},"Quantidade",-1)),l("p",to,C(v.quantidade),1)]),v.saida!=null?(V(),x("div",lo,[t[2]||(t[2]=l("p",{class:"label"},"Saída",-1)),l("p",ao,C(v.saida),1)])):re("",!0)])])}const no=ue(Je,[["render",so],["__scopeId","data-v-c92969cc"]]),ro={class:"row q-col-gutter-md"},io={class:"q-mt-md flex justify-end"},uo={__name:"ModalCadastroProduto",setup(e,{expose:t}){const{createProduto:v}=H(),P=["ELETRONICO","ELETRODOMESTICO","MOVEL"],p=m(!1);function c(){p.value=!0}function y(){p.value=!1}async function r(){let h={descricao:O.value,tipo:_.value,valorFornecedor:S.value,quantidadeEstoque:f.value};await v(h),b(),y()}function b(){O.value="",_.value="",S.value="",E.value="",f.value=""}function n(h){const i=parseFloat(h.replace(/[^\d]/g,""))/100;S.value=i,E.value=i.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}const q=h=>{h<0&&(f.value=0)},E=m(""),O=m(""),_=m(""),S=m(null),f=m(null);return t({open:c,close:y}),(h,i)=>(V(),Q(de,{modelValue:p.value,"onUpdate:modelValue":i[4]||(i[4]=s=>p.value=s)},{default:g(()=>[o(I,null,{default:g(()=>[o(F,{class:"text-h6"},{default:g(()=>[o(N,{name:"add"}),i[5]||(i[5]=L(" Cadastro de Produtos "))]),_:1}),o(F,null,{default:g(()=>[o(ce,{onSubmit:ie(r,["prevent"]),onReset:b},{default:g(()=>[l("div",ro,[o(k,{outlined:"",class:"col-12 col-md-6",modelValue:O.value,"onUpdate:modelValue":i[0]||(i[0]=s=>O.value=s),label:"Descrição","lazy-rules":"",rules:[s=>!!s||"Informe a descrição"]},null,8,["modelValue","rules"]),o(A,{outlined:"",class:"col-12 col-md-6",modelValue:_.value,"onUpdate:modelValue":i[1]||(i[1]=s=>_.value=s),label:"Tipo do Produto",options:P,"lazy-rules":"",rules:[s=>!!s||"Selecione um tipo"]},null,8,["modelValue","rules"]),o(k,{outlined:"",class:"col-12 col-md-6",modelValue:E.value,"onUpdate:modelValue":[i[2]||(i[2]=s=>E.value=s),n],label:"Valor no Fornecedor (R$)","lazy-rules":"",rules:[s=>!!s||"Informe o valor"]},null,8,["modelValue","rules"]),o(k,{outlined:"",class:"col-12 col-md-6",modelValue:f.value,"onUpdate:modelValue":i[3]||(i[3]=s=>f.value=s),label:"Quantidade em Estoque",type:"number",onInput:q,"lazy-rules":"",rules:[s=>s>=0||"Quantidade não pode ser negativa"]},null,8,["modelValue","rules"])]),l("div",io,[o($,{label:"Confirmar",type:"submit",color:"primary"}),o($,{label:"Fechar",flat:"",color:"primary",class:"q-ml-sm",onClick:y})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},co=_e({name:"QTooltip",inheritAttrs:!1,props:{...$e,...ze,...z,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...z.transitionShow,default:"jump-down"},transitionHide:{...z.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:le},self:{type:String,default:"top middle",validator:le},offset:{type:Array,default:()=>[14,14],validator:ke},scrollTarget:je,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Ue],setup(e,{slots:t,emit:v,attrs:P}){let p,c;const y=Ee(),{proxy:{$q:r}}=y,b=m(null),n=m(!1),q=R(()=>ae(e.anchor,r.lang.rtl)),E=R(()=>ae(e.self,r.lang.rtl)),O=R(()=>e.persistent!==!0),{registerTick:_,removeTick:S}=Me(),{registerTimeout:f}=He(),{transitionProps:h,transitionStyle:i}=De(e),{localScrollTarget:s,changeScrollEvent:d,unconfigureScrollTarget:u}=Ne(e,X),{anchorEl:a,canShow:me,anchorEvents:M}=Re({showing:n,configureAnchorEl:he}),{show:ve,hide:B}=Ae({showing:n,canShow:me,handleShow:fe,handleHide:ge,hideOnRouteChange:O,processOnMount:!0});Object.assign(M,{delayShow:ye,delayHide:be});const{showPortal:W,hidePortal:J,renderPortal:pe}=Qe(y,b,Pe,"tooltip");if(r.platform.is.mobile===!0){const T={anchorEl:a,innerRef:b,onClickOutside(w){return B(w),w.target.classList.contains("q-dialog__backdrop")&&qe(w),!0}},U=R(()=>e.modelValue===null&&e.persistent!==!0&&n.value===!0);Z(U,w=>{(w===!0?Le:se)(T)}),G(()=>{se(T)})}function fe(T){W(),_(()=>{c=new MutationObserver(()=>D()),c.observe(b.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),D(),X()}),p===void 0&&(p=Z(()=>r.screen.width+"|"+r.screen.height+"|"+e.self+"|"+e.anchor+"|"+r.lang.rtl,D)),f(()=>{W(!0),v("show",T)},e.transitionDuration)}function ge(T){S(),J(),K(),f(()=>{J(!0),v("hide",T)},e.transitionDuration)}function K(){c!==void 0&&(c.disconnect(),c=void 0),p!==void 0&&(p(),p=void 0),u(),ee(M,"tooltipTemp")}function D(){Ie({targetEl:b.value,offset:e.offset,anchorEl:a.value,anchorOrigin:q.value,selfOrigin:E.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ye(T){if(r.platform.is.mobile===!0){ne(),document.body.classList.add("non-selectable");const U=a.value,w=["touchmove","touchcancel","touchend","click"].map(Y=>[U,Y,"delayHide","passiveCapture"]);oe(M,"tooltipTemp",w)}f(()=>{ve(T)},e.delay)}function be(T){r.platform.is.mobile===!0&&(ee(M,"tooltipTemp"),ne(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),f(()=>{B(T)},e.hideDelay)}function he(){if(e.noParentEvent===!0||a.value===null)return;const T=r.platform.is.mobile===!0?[[a.value,"touchstart","delayShow","passive"]]:[[a.value,"mouseenter","delayShow","passive"],[a.value,"mouseleave","delayHide","passive"]];oe(M,"anchor",T)}function X(){if(a.value!==null||e.scrollTarget!==void 0){s.value=We(a.value,e.scrollTarget);const T=e.noParentEvent===!0?D:B;d(s.value,T)}}function Te(){return n.value===!0?te("div",{...P,ref:b,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",P.class],style:[P.style,i.value],role:"tooltip"},Ve(t.default)):null}function Pe(){return te(Se,h.value,Te)}return G(K),Object.assign(y.proxy,{updatePosition:D}),pe}}),mo={class:"row items-center"},vo={class:"row q-col-gutter-md"},po={class:"q-mt-md flex justify-end"},fo={__name:"ModalEditarProduto",setup(e,{expose:t}){const{updateProduto:v,deleteProduto:P}=H(),p=["ELETRONICO","ELETRODOMESTICO","MOVEL"],c=m(!1);function y(d){d&&(_.value=d.id,f.value=d.descricao,h.value=d.tipo,q(d.valorFornecedor),s.value=d.quantidadeEstoque),c.value=!0}function r(){c.value=!1}async function b(){let d={descricao:f.value,tipo:h.value,valorFornecedor:i.value,quantidadeEstoque:s.value};console.log(_),await v(_.value,d),n(),r()}function n(){f.value="",h.value="",i.value="",S.value="",s.value=""}function q(d){const u=typeof d=="string"?parseFloat(d.replace(/[^\d]/g,""))/100:Number(d);i.value=u,S.value=u.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}async function E(d){await P(d),r()}const O=d=>{d<0&&(s.value=0)},_=m(null),S=m(""),f=m(""),h=m(""),i=m(null),s=m(0);return t({open:y,close:r}),(d,u)=>(V(),Q(de,{modelValue:c.value,"onUpdate:modelValue":u[5]||(u[5]=a=>c.value=a)},{default:g(()=>[o(I,null,{default:g(()=>[o(F,{class:"row justify-between"},{default:g(()=>[l("div",mo,[o(N,{class:"text-h6",name:"edit"}),u[6]||(u[6]=l("div",{class:"text-h6"}," Editar Produto ",-1))]),o(N,{class:"text-red text-h6",name:"delete",style:{cursor:"pointer"},onClick:u[0]||(u[0]=a=>E(_.value))},{default:g(()=>[o(co,{anchor:"top middle",self:"bottom middle","transition-show":"scale","transition-hide":"scale"},{default:g(()=>u[7]||(u[7]=[L(" Deletar produto ")])),_:1})]),_:1})]),_:1}),o(F,null,{default:g(()=>[o(ce,{onSubmit:ie(b,["prevent"]),onReset:n},{default:g(()=>[l("div",vo,[o(k,{outlined:"",class:"col-12 col-md-6",modelValue:f.value,"onUpdate:modelValue":u[1]||(u[1]=a=>f.value=a),label:"Descrição","lazy-rules":"",rules:[a=>!!a||"Informe a descrição"]},null,8,["modelValue","rules"]),o(A,{outlined:"",class:"col-12 col-md-6",modelValue:h.value,"onUpdate:modelValue":u[2]||(u[2]=a=>h.value=a),label:"Tipo do Produto",options:p,"lazy-rules":"",rules:[a=>!!a||"Selecione um tipo"]},null,8,["modelValue","rules"]),o(k,{outlined:"",class:"col-12 col-md-6",modelValue:S.value,"onUpdate:modelValue":[u[3]||(u[3]=a=>S.value=a),q],label:"Valor no Fornecedor (R$)","lazy-rules":"",rules:[a=>!!a||"Informe o valor"]},null,8,["modelValue","rules"]),o(k,{outlined:"",class:"col-12 col-md-6",modelValue:s.value,"onUpdate:modelValue":u[4]||(u[4]=a=>s.value=a),label:"Quantidade em Estoque",type:"number",min:"0",onInput:O,"lazy-rules":"",rules:[a=>a>=0||"Quantidade não pode ser negativa"]},null,8,["modelValue","rules"])]),l("div",po,[o($,{label:"Confirmar",type:"submit",color:"primary"}),o($,{label:"Fechar",flat:"",color:"primary",class:"q-ml-sm",onClick:r})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},go=Oe({name:"Index",components:{Produto:no,ModalProduto:uo,ModalEditarProduto:fo},setup(){const e=H(),{fetchProdutos:t,fetchByTipo:v}=e,{produtos:P}=Be(e),p=["TODOS","ELETRONICO","ELETRODOMESTICO","MOVEL"],c=m(null),y=m(null),r=m("TODOS"),b=E=>{y.value?.open(E)},n=()=>{c.value?.open()},q=()=>{r.value=="TODOS"?t():v(r.value)};return we(async()=>{await t()}),{produtos:P,modalProduto:c,modalEditProduto:y,filtroTipo:r,tipos:p,openNewProdutoDialog:n,openEditDialog:b,buscarPorTipo:q}}}),yo={key:0,class:"flex flex-center column q-pa-xl"},bo={class:"text-center"},ho={class:"q-mt-md flex flex-center"},To={key:1,class:"q-pa-md"},Po={class:"header row justify-end q-gutter-xs"},_o={key:0,class:"q-pa-md flex flex-center"},Eo={class:"text-center"},So={class:"text-subtitle2"},Vo={id:"produtos",class:"row wrap"};function qo(e,t,v,P,p,c){const y=j("ModalProduto"),r=j("ModalEditarProduto"),b=j("Produto");return V(),Q(Fe,null,{default:g(()=>[o(y,{ref:"modalProduto"},null,512),o(r,{ref:"modalEditProduto"},null,512),e.produtos.length===0&&this.filtroTipo=="TODOS"?(V(),x("div",yo,[o(I,{flat:"",bordered:"",class:"bg-grey-1 text-grey-8 q-pa-xl",style:{"max-width":"420px"}},{default:g(()=>[l("div",bo,[o(N,{name:"inventory_2",size:"56px",color:"primary",class:"q-mb-md"}),t[2]||(t[2]=l("div",{class:"text-h6 q-mb-sm"},"Nenhum produto cadastrado",-1)),t[3]||(t[3]=l("div",{class:"text-subtitle2"}," Cadastre seu primeiro item para começar a controlar o estoque. ",-1))]),l("div",ho,[o($,{color:"secondary",icon:"add_circle_outline",label:"Cadastrar Produto",onClick:e.openNewProdutoDialog,unelevated:""},null,8,["onClick"])])]),_:1})])):(V(),x("div",To,[l("div",Po,[o(A,{outlined:"",class:"col-md-2",modelValue:e.filtroTipo,"onUpdate:modelValue":[t[0]||(t[0]=n=>e.filtroTipo=n),t[1]||(t[1]=n=>e.buscarPorTipo())],label:"Filtrar por tipo",options:e.tipos},null,8,["modelValue","options"]),o($,{color:"secondary","icon-right":"add",label:"Cadastrar produto",onClick:e.openNewProdutoDialog},null,8,["onClick"])]),e.produtos.length===0&&e.filtroTipo!=null?(V(),x("div",_o,[o(I,{flat:"",bordered:"",class:"bg-grey-1 text-grey-8 q-pa-xl",style:{"max-width":"400px"}},{default:g(()=>[l("div",Eo,[o(N,{name:"info",size:"48px",color:"primary",class:"q-mb-md"}),t[6]||(t[6]=l("div",{class:"text-h6 q-mb-sm"},"Nenhum produto encontrado",-1)),l("div",So,[t[4]||(t[4]=L(" Não há itens cadastrados para o tipo ")),l("strong",null,C(e.filtroTipo),1),t[5]||(t[5]=L(". "))])])]),_:1})])):re("",!0),l("div",Vo,[(V(!0),x(Ce,null,xe(e.produtos,n=>(V(),Q(b,{key:n.id,id:n.id,nome:n.descricao,tipo:n.tipo,valor:n.valorFornecedor,quantidade:n?.quantidadeDisponivel??n?.quantidadeEstoque,saida:n.quantidadeSaida,onClick:q=>e.openEditDialog(n)},null,8,["id","nome","tipo","valor","quantidade","saida","onClick"]))),128))])]))]),_:1})}const $o=ue(go,[["render",qo]]);export{$o as default};
